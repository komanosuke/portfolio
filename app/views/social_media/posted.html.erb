
<main>
    <div class="side-bar pc">
        <%= render 'social_media/sidebar' %>
    </div>

    <div class="contents" id="sns-contents">
        <div id="sns-container">
            <h1>基本情報</h1>
            <div id="profile-user-wrapper">
                <%= image_tag @user.image.url, class:"profile-thumb", alt:"" %>
                <table id="profile-table">
                    <tr>
                        <th>名前</th>
                        <td><%= @user.name %></td>
                    </tr>
                    <tr>
                        <th>ID</th>
                        <td><%= @user.username %></td>
                    </tr>
                    <tr>
                        <th>紹介文</th>
                        <td>
                            <% if @user.profile =! "" %>
                                <%= @user.profile %>
                            <% else %>
                                紹介文が登録されていません。
                            <% end %>
                        </td>
                    </tr>
                </table>
            </div>

            <div class="follow-wrapper" id="show-follow-wrapper">
                <%= render 'social_media/posted_relationships' %>
            </div>

            <div id="change-post">
                <%= form_with url: posted_path(@user.id), local: false do |form| %>
                    <%= form.hidden_field "post_cat", {value: 'posted'} %>
                    <%= form.submit "投稿内容", class:'btn submit-btn sns-btn' %>
                <% end %>
                <%= form_with url: posted_path(@user.id), local: false do |form| %>
                    <%= form.hidden_field "post_cat", {value: 'liked'} %>
                    <%= form.submit "Likeした投稿", class:'btn submit-btn sns-btn' %>
                <% end %>
                <%= form_with url: posted_path(@user.id), local: false do |form| %>
                    <%= form.hidden_field "post_cat", {value: 'commented'} %>
                    <%= form.submit "コメントした投稿", class:'btn submit-btn sns-btn' %>
                <% end %>
            </div>
            <h2 id="post-selection">投稿内容</h2>
            <div class="works sns-posts" id="posts-each-do">
                <% if @posts.exists? %>
                    <%= render 'posts/posts' %>
                <% else %>
                    まだ投稿はありません。
                <% end %>
            </div>

        </div>
    </div>
</main>

<script>
    $('.sns-btn').first().attr('style', 'background-color: #436aa2 !important;');

    $(document).ready(function() {
        let currentURL = window.location.href.match(/\/post(.*)/)[0];
        $('.relationship_url').val(currentURL);
    });
</script>